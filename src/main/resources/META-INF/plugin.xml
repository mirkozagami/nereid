<idea-plugin>
    <id>com.nereid.mermaid</id>
    <name>Nereid - Mermaid Diagrams</name>
    <vendor email="support@nereid.dev" url="https://github.com/nereid">Nereid</vendor>

    <description><![CDATA[
    Full-featured Mermaid diagram support for JetBrains IDEs.

    <ul>
        <li>Live preview with zoom and pan</li>
        <li>Syntax highlighting and error detection</li>
        <li>Autocomplete for diagram types and syntax</li>
        <li>Export to PNG, SVG, and clipboard</li>
        <li>Markdown fenced code block support</li>
    </ul>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends optional="true" config-file="markdown-support.xml">org.intellij.plugins.markdown</depends>

    <extensions defaultExtensionNs="com.intellij">
        <fileType
            name="Mermaid"
            implementationClass="com.nereid.language.MermaidFileType"
            fieldName="INSTANCE"
            language="Mermaid"
            extensions="mmd;mermaid"/>

        <lang.syntaxHighlighterFactory
            language="Mermaid"
            implementationClass="com.nereid.editor.MermaidSyntaxHighlighterFactory"/>

        <colorSettingsPage implementationClass="com.nereid.editor.MermaidColorSettingsPage"/>

        <fileEditorProvider implementationClass="com.nereid.spliteditor.MermaidEditorProvider"/>

        <lang.braceMatcher language="Mermaid" implementationClass="com.nereid.editor.MermaidBraceMatcher"/>

        <lang.commenter language="Mermaid" implementationClass="com.nereid.editor.MermaidCommenter"/>

        <lang.foldingBuilder language="Mermaid" implementationClass="com.nereid.editor.MermaidFoldingBuilder"/>

        <completion.contributor language="Mermaid" implementationClass="com.nereid.editor.MermaidCompletionContributor"/>

        <lang.parserDefinition language="Mermaid" implementationClass="com.nereid.language.MermaidParserDefinition"/>

        <annotator language="Mermaid" implementationClass="com.nereid.editor.MermaidAnnotator"/>
    </extensions>

    <actions>
        <group id="Mermaid.ExportGroup" text="Mermaid" popup="true">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <action id="Mermaid.ExportPng" class="com.nereid.actions.ExportToPngAction"/>
            <action id="Mermaid.ExportSvg" class="com.nereid.actions.ExportToSvgAction"/>
            <separator/>
            <action id="Mermaid.CopyPng" class="com.nereid.actions.CopyAsPngAction"/>
        </group>

        <action id="Mermaid.ExportPngShortcut" class="com.nereid.actions.ExportToPngAction">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift E"/>
        </action>
    </actions>
</idea-plugin>
